<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Estimation Poker</title>
	<!--<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">-->
	<link rel="stylesheet" href="css/lib/bootstrap.min.css">
	<link rel="stylesheet" href="css/style.css">
	{{#piwik}}
	<script>
		// Set up client error tracking
		var _paq = _paq || [];
		window.onerror = function(message, file, line) {
			var sFormattedMessage = '[' + file + ' (' + line + ')] ' + message;
			_paq.push(['trackEvent', 'Errors', 'Browser', sFormattedMessage, null, true]);
		}
	</script>
	{{/piwik}}
</head>
<body>
	<div class="container">
		<div class="col-lg-12">
			<h1>Planning Poker</h1>
		</div>
		<div class="story col-lg-4">
			<h2>The Story</h2>
			<blockquote class="storyTitle">
				<p data-bind="editableText: storyTitle" data-edit-hint="<edit story title>"></p>
			</blockquote>
		</div>

		<div class="estimations col-lg-8">
			<h2>The Estimations</h2>
			<table class="table" data-bind="css: {incomplete: !$root.estimationsComplete()}">
				<tbody class="localUser">
					<tr>
						<td>
							<span class="username" data-bind="editableText: localUser().name" data-edit-hint="<your name>"></span>
							<span class="btn-group" data-bind="estimationSelect: localUser().estimation"></span>
						</td>
						<td>
							<span class="estimation" data-bind="
								text: localUser().estimation,
								css: {
									estimated: localUser().estimation() !== false,
									max: localUser().estimation() === $root.highestEstimation(),
									min: localUser().estimation() === $root.lowestEstimation()
								}"></span>
						</td>
					</tr>
				</tbody>
				<tbody class="remoteUsers" data-bind="foreach: users">
					<tr>
						<td class="name" data-bind="text: name"></td>
						<td>
							<span class="estimation" data-bind="
								text: estimation,
								css: {
									estimated: estimation() !== false,
									max: estimation() === $root.highestEstimation(),
									min: estimation() === $root.lowestEstimation()
								}"></span>
						</td>
					</tr>
				</tbody>
				<tbody class="summary">
					<tr>
						<td>Team estimation (max)</td>
						<td>
							<span class="estimation" data-bind="text: $root.highestEstimation()"></span>
						</td>
					</tr>
				</tbody>
			</table>
			<button class="btn btn-sm" data-bind="click: initNewRound">
				<span class="glyphicon glyphicon-repeat"></span>
				New Round
			</button>
		</div>


	</div>

	{{^productionMode}}
	<script src="/socket.io/socket.io.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/3.1.0/knockout-debug.js"></script>
	<script>window.ko || document.write('<script src="js/lib/knockout-debug.js"><\/script>')</script>

	<script src="js/tools.js"></script>
	<script src="js/models.js"></script>
	<script src="js/bindings.js"></script>
	<script src="js/app.js"></script>
	{{/productionMode}}

	{{#productionMode}}
	<script src="js/client.prod.min.js"></script>
	{{/productionMode}}

	{{#piwik}}
	<!-- Piwik -->
	<script type="text/javascript">
	  var _paq = _paq || [];
	  _paq.push(['trackPageView']);
	  _paq.push(['enableLinkTracking']);
	  (function() {
		var u=(("https:" == document.location.protocol) ? "https" : "http") + "://{{piwik.url}}/";
		_paq.push(['setTrackerUrl', u+'piwik.php']);
		_paq.push(['setSiteId', {{piwik.siteId}}]);
		var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript';
		g.defer=true; g.async=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
	  })();
	</script>
	<noscript><p><img src="http://{{piwik.url}}/piwik.php?idsite={{piwik.siteId}}" style="border:0;" alt="" /></p></noscript>
	<!-- End Piwik Code -->
	{{/piwik}}
</body>
</html>